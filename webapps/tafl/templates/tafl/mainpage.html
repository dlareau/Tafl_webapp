{% extends "tafl/interior_base.html" %}
{% block title %}Games{% endblock %}
{% load staticfiles %}

{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="panel panel-default">
      <div class="panel-body">
	<h3>Create New Game</h3>
	<div class="panel panel-default">
	  <div class="panel-body">
	    <form role="form" class="form horizontal" method="post" action="{% url 'makegame'  %}">
	      <label>Color:</label>
	      <div>
	      <div class="radio">
		<label><input type="radio" name="optradio" value="black">black</label>
	      </div>
	      <div class="radio">
		<label><input type="radio" name="optradio" value="white">white</label>
	      </div>
	      <div class="radio">
		<label><input type="radio" name="optradio" value="either">either</label>
	      </div>
	  </div>
	      <label for="sel1">Variant:</label>
	      <select name="ruleset" class="form-control" id="sel1">
		<option>Tablut</option>
	      </select>
	      <input type="submit" class="btn btn-primary" value="Make Game">
	      {% csrf_token %}
	    </form>
	  </div>
	</div>
      </div>
      <div class="panel-body">
	<h3>Join a Game</h3>
	<div class="panel panel-default">
	  <div class="panel-body">
	    <div class="row">
	      <div class="col-md-2">
		<label>sort by:</label>
	      </div>
	    </div>
	    <div class="row">
	      <form method="GET" action="/tafl/mainpage">
		<div class="col-md-5">
		  <div class="btn-group" role="group">
		    <button class="btn btn-info" type="submit" name="sortby" value="timeOtN">
		      oldest to newest</button>
		    <button class="btn btn-info" type="submit" name="sortby" value="timeNtO">
		      newest to oldest</button>
		  </div>
		</div>
		<div class="col-md-2">
		  <button class="btn btn-info" type="submit" name="sortby" value="rank">
		    player rank</button>
		</div>
		<div class="col-md-2">
		  <button class="btn btn-info" type="submit" name="sortby" value="color">
		    open color</button>
		</div>
		<div class="col-md-2">
		  <button class="btn btn-info" type="submit" name="sortby" value="variant">
		    variant</button>
		</div>
		{% csrf_token %}
	      </form>
	    </div>
	  </div>
	</div>
	{% for game in games %}
	<div class="panel panel-default">
	  <div class="panel-body">
	    <div class="row">
	      <div class="col-md-2">
		<h4><a href="/tafl/profile?un={{game.waiting_player.user.username}}">
		    {{ game.waiting_player.user.username }}
		</a></h4>
	      </div>
	      <div class="col-md-4"> <h4>({{ game.waiting_player.rank }})</h4></div>
	      <div class="col-md-3">
		<h4>waiting for: {{ game.waitingcolor }}</h4>
	      </div>
	    </div>
	    <div class="row">
	      <div class="col-md-3">
		<h4>{{ game.ruleset.name }}</h4>
		{{game.timestamp}}
	      </div>
	      <div class="col-md-6"></div>
	      <div class="col-md-3">
		<form action="/tafl/joingame" method="POST">
		  <input type="hidden" name="gameid" value="{{game.id}}">
		  {% csrf_token %}
		  <button class="btn btn-primary" type="submit">Join</button>
		</form>
	      </div>
	    </div>
	  </div>
	</div>
	{% endfor %}
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="panel panel-info">
      <div class="panel-heading">
	<h3>User Search</h3>
      </div>
      <div class="panel-body">
	<form class="form-horizontal" role="form" method="POST" action="{% url 'usersearch' %}">
	  {{ usform }}
	  <input type="submit" value="go" class="btn btn-primary" />
	</form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
